# 视频数据导入 - 快速使用指南

## 🚀 快速开始

### 方式一：一键导入（推荐）

#### Windows系统

1. **编辑批处理脚本**
   
   打开 `import_all_videos.bat`，修改以下行：
   ```bat
   set JSON_DIR=f:\视频json文件\视频json文件
   ```

2. **运行脚本**
   
   双击 `import_all_videos.bat`，脚本会自动：
   - 读取所有JSON文件
   - 生成SQL导入脚本
   - 显示导入说明

3. **执行SQL导入**
   ```bash
   mysql -u root -p short_video_platform < backend-server\scripts\imported_videos.sql
   ```

#### Linux/Mac系统

1. **编辑Shell脚本**
   
   打开 `import_all_videos.sh`，修改以下行：
   ```bash
   JSON_DIR="f:/视频json文件/视频json文件"
   ```

2. **运行脚本**
   ```bash
   chmod +x import_all_videos.sh
   ./import_all_videos.sh
   ```

3. **执行SQL导入**
   ```bash
   mysql -u root -p short_video_platform < backend-server/scripts/imported_videos.sql
   ```

### 方式二：手动导入

#### 步骤1：生成SQL脚本

```bash
python backend-server/scripts/import_videos_from_json.py "f:/视频json文件/视频json文件/*.json" --user-id 10000 --status 1 --output imported_videos.sql
```

#### 步骤2：查看生成的SQL（可选）

```bash
# Windows
type imported_videos.sql

# Linux/Mac
cat imported_videos.sql
```

#### 步骤3：执行SQL导入

```bash
mysql -u root -p short_video_platform < imported_videos.sql
```

## 📋 参数说明

| 参数 | 说明 | 默认值 | 示例 |
|------|------|--------|------|
| `--user-id` | 发布者用户ID | 10000 | `--user-id 10004` |
| `--status` | 视频状态 | 1 | `--status 1` |
| `--output` | 输出SQL文件 | 控制台 | `--output videos.sql` |
| `--database` | 数据库名称 | short_video_platform | `--database mydb` |

### 视频状态说明

- `0` - 待审核（需要管理员审核）
- `1` - 已发布（用户可见）⭐ 推荐
- `2` - 驳回（审核不通过）

## 📁 文件结构

```
backend-server/
└── scripts/
    ├── import_videos_from_json.py    # Python导入脚本（核心）
    ├── import_all_videos.bat         # Windows批处理脚本
    ├── import_all_videos.sh          # Linux/Mac Shell脚本
    ├── README_视频导入.md             # 详细使用说明
    └── 快速使用指南.md                # 本文件
```

## ✅ 导入后验证

执行以下SQL验证数据：

```sql
-- 查看导入的视频总数
SELECT COUNT(*) as total FROM video_info;

-- 按分类统计
SELECT 
    c.name as category,
    COUNT(v.id) as count
FROM video_info v
LEFT JOIN video_category c ON v.category_id = c.id
GROUP BY c.name;

-- 查看最近导入的视频
SELECT id, title, category_id, status, create_time 
FROM video_info 
ORDER BY create_time DESC 
LIMIT 10;
```

## ⚠️ 常见问题

### 1. 找不到Python

**解决**: 安装Python 3.x 或使用完整路径

### 2. 无法识别分类

**解决**: 确保JSON文件名包含分类关键词（funny, life, tech, game, food, pet）

### 3. 数据库连接失败

**解决**: 
- 检查MySQL服务是否启动
- 确认数据库已创建：`CREATE DATABASE short_video_platform;`
- 确认已执行 `database.sql` 初始化表结构

### 4. 用户ID不存在

**解决**: 查询admin用户ID并修改参数
```sql
SELECT id FROM sys_user WHERE username = 'admin';
```

## 📞 需要帮助？

查看详细文档：`README_视频导入.md`
